#N canvas 1065 103 383 161 12;
#X declare -path ../../../PD/externals/conTorchionist;
#X obj 18 25 declare -path ../../../PD/externals/conTorchionist;
#N canvas 893 139 255 287 spectral-feature 1;
#X obj 27 24 r~ input-sig;
#N canvas 447 298 450 300 spec-flux 0;
#X obj 120 125 r spec-flux-analysis;
#X obj 120 172 s spec-flux-feat;
#X obj 120 149 specFlux~ 4096 512;
#X obj 13 42 switch~;
#X obj 20 99 inlet~;
#X msg 118 87 normalize 1;
#X obj 118 53 loadbang;
#X obj 13 18 r enable-spec-flux;
#X connect 0 0 2 0;
#X connect 2 0 1 0;
#X connect 4 0 2 0;
#X connect 5 0 2 0;
#X connect 6 0 5 0;
#X connect 7 0 3 0;
#X restore 26 109 pd spec-flux;
#N canvas 1141 202 450 300 spec-centroid 0;
#X obj 61 144 specCentroid~ 4096;
#X obj 61 118 r spec-centroid-analysis;
#X obj 61 167 s spec-centroid-feat;
#X obj 13 42 switch~;
#X obj 13 18 r enable-spec-centroid;
#X obj 25 82 inlet~;
#X connect 0 0 2 0;
#X connect 1 0 0 0;
#X connect 4 0 3 0;
#X connect 5 0 0 0;
#X restore 25 131 pd spec-centroid;
#N canvas 1004 392 691 470 mfcc 0;
#X obj 13 42 switch~;
#X obj 13 18 r enable-mfcc;
#X obj 89 181 torch.mfcc~ -n_mels 40 -n_mfcc 13 -n_fft 4096 -hop 512, f 33;
#X obj 64 242 s mfcc-feat;
#X obj 64 219 list;
#X obj 64 154 r mfcc-analysis;
#X obj 155 242 array set mfcc-analysis-feat;
#X msg 370 162 norm mag2;
#X msg 450 163 unit magphase;
#X obj 331 96 loadbang;
#X obj 88 107 inlet~;
#X connect 1 0 0 0;
#X connect 2 0 4 1;
#X connect 4 0 3 0;
#X connect 4 0 6 0;
#X connect 5 0 4 0;
#X connect 7 0 2 0;
#X connect 8 0 2 0;
#X connect 9 0 7 0;
#X connect 9 0 8 0;
#X connect 10 0 2 0;
#X restore 26 178 pd mfcc;
#N canvas 1112 303 656 363 melspectrogram 0;
#X obj 12 41 switch~;
#X obj 12 17 r enable-melspec;
#X obj 72 290 list;
#X obj 72 314 s melspec-feat;
#X obj 72 64 r melspec-analysis;
#X obj 218 311 array set melspec-analysis-feat;
#X obj 97 180 inlet~;
#X obj 72 152 metro 92.8;
#X msg 136 116 stop;
#X obj 136 94 del 836;
#X obj 97 243 torch.melspectrogram~ -n_mels 80 -n_fft 4096 -hop 512 -win hann -unit magphase -norm n_fft -melcalc htk -fb_norm slaney -v, f 71;
#X text 428 152 92.87ms = 4096 samples;
#X text 151 152 calcultes 10 consecutive frames (4096);
#X text 200 96 836ms = 9 frames (4096);
#X connect 1 0 0 0;
#X connect 2 0 3 0;
#X connect 2 0 5 0;
#X connect 4 0 7 0;
#X connect 4 0 9 0;
#X connect 6 0 10 0;
#X connect 7 0 2 0;
#X connect 8 0 7 0;
#X connect 9 0 8 0;
#X connect 10 0 2 1;
#X restore 26 202 pd melspectrogram;
#N canvas 1120 508 660 358 spectrogram 0;
#X obj 12 42 switch~;
#X obj 12 17 r enable-spectrogram;
#X obj 63 140 torch.spectrogram~ -n_fft 4096 -hop 512 -win blackman -unit magphase -norm mag, f 71;
#X obj 38 181 list;
#X obj 38 109 r spectrogram-analysis;
#X obj 38 204 s spectrogram-feat;
#X obj 186 199 array set spectrogram-analysis-feat;
#X obj 63 74 inlet~;
#X connect 1 0 0 0;
#X connect 2 0 3 1;
#X connect 3 0 5 0;
#X connect 3 0 6 0;
#X connect 4 0 3 0;
#X connect 7 0 2 0;
#X restore 26 225 pd spectrogram;
#N canvas 975 363 450 300 spec-harmonicity 0;
#X obj 13 42 switch~;
#X obj 13 18 r enable-spec-harm;
#X obj 52 166 specHarmonicity~ 4096;
#X obj 53 213 s spec-harm-feat;
#X obj 213 208 s spec-inharm-feat;
#X obj 52 120 r spec-harm-analysis;
#X obj 213 125 r spec-inharm-analysis;
#X obj 213 186 f;
#X obj 213 147 t b b;
#X obj 53 191 f;
#X obj 52 141 t b b;
#X obj 21 77 inlet~;
#X connect 1 0 0 0;
#X connect 2 0 9 1;
#X connect 2 1 7 1;
#X connect 5 0 10 0;
#X connect 6 0 8 0;
#X connect 7 0 4 0;
#X connect 8 0 7 0;
#X connect 8 1 2 0;
#X connect 9 0 3 0;
#X connect 10 0 9 0;
#X connect 10 1 2 0;
#X connect 11 0 2 0;
#X restore 25 154 pd spec-harmonicity;
#N canvas 1164 409 554 343 sigmund 1;
#X obj 62 189 route 0 1 2, f 12;
#X msg 62 215 \$1;
#X msg 95 215 \$1;
#X msg 129 215 \$1;
#X obj 62 240 pack 0 0 0;
#X obj 37 285 list;
#X obj 62 141 sigmund~ -npts 4096 -hop 2048 -npeak 3 -maxfreq 5000 -stabletime 100 -minpower 80 -vibrato 0.5 -growth 10 peaks, f 68;
#X obj 62 111 inlet~;
#X obj 13 42 switch~;
#X obj 13 18 r enable-sigmund;
#X obj 37 85 r sigmund-analysis;
#X obj 37 309 s 3f-freqfund;
#X obj 103 266 r sigmundto3f;
#X text 200 266 bang to send sigmund output to 3f;
#X connect 0 0 1 0;
#X connect 0 1 2 0;
#X connect 0 2 3 0;
#X connect 1 0 4 0;
#X connect 2 0 4 1;
#X connect 3 0 4 2;
#X connect 4 0 5 1;
#X connect 5 0 11 0;
#X connect 6 0 0 0;
#X connect 7 0 6 0;
#X connect 9 0 8 0;
#X connect 10 0 5 0;
#X connect 12 0 5 0;
#X restore 27 248 pd sigmund;
#X connect 0 0 1 0;
#X connect 0 0 6 0;
#X connect 0 0 5 0;
#X connect 0 0 4 0;
#X connect 0 0 3 0;
#X connect 0 0 2 0;
#X connect 0 0 7 0;
#X restore 35 112 pd spectral-feature;
#N canvas 914 177 347 310 temporal-feature 0;
#X obj 24 19 r~ input-sig;
#N canvas 1024 83 450 300 harm-ratio 0;
#X obj 42 213 harmonicRatio~ 4096;
#X obj 67 161 r harm-ratio-analysis;
#X obj 42 237 s harm-ratio-feat;
#X msg 61 135 normalize 1;
#X obj 61 111 loadbang;
#X obj 20 40 switch~;
#X obj 20 16 r enable-harm-ratio;
#X obj 42 85 inlet~;
#X connect 0 0 2 0;
#X connect 1 0 0 0;
#X connect 3 0 0 0;
#X connect 4 0 3 0;
#X connect 6 0 5 0;
#X connect 7 0 0 0;
#X restore 25 84 pd harm-ratio;
#N canvas 1070 127 450 300 zero-crossing 0;
#X obj 51 227 zeroCrossing~ 4046;
#X obj 80 199 r zero-cross-analysis;
#X obj 51 250 s zero-cross-feat;
#X msg 80 154 normalize 1;
#X obj 80 130 loadbang;
#X obj 51 91 inlet~;
#X obj 20 40 switch~;
#X obj 20 16 r enable-zero-cross;
#X connect 0 0 2 0;
#X connect 1 0 0 0;
#X connect 3 0 0 0;
#X connect 4 0 3 0;
#X connect 5 0 0 0;
#X connect 7 0 6 0;
#X restore 24 107 pd zero-crossing;
#N canvas 996 77 522 355 energy-entropy 0;
#X obj 20 40 switch~;
#X obj 92 186 energyEntropy~ 4096 16;
#X obj 110 158 r energy-entropy-analysis;
#X obj 92 210 s energy-entropy-feat;
#X obj 92 124 inlet~;
#X obj 20 16 r enable-energy-entropy;
#X connect 1 0 3 0;
#X connect 2 0 1 0;
#X connect 4 0 1 0;
#X connect 5 0 0 0;
#X restore 24 154 pd energy-entropy;
#N canvas 1089 113 450 300 attack-time 0;
#X obj 20 40 switch~;
#X obj 20 16 r enable-attack-time;
#X obj 79 160 attackTime~ 4096;
#X obj 79 137 r attack-time-analysis;
#X obj 79 184 s attack-time-feat;
#X obj 55 83 inlet~;
#X connect 1 0 0 0;
#X connect 2 0 4 0;
#X connect 3 0 2 0;
#X connect 5 0 2 0;
#X restore 24 131 pd attack-time;
#N canvas 1084 133 450 300 temp-centroid 0;
#X obj 32 199 temp.centroid \$0-input-sig 0 88200;
#X obj 32 222 s temp-centroid-feat;
#X obj 48 172 r temp-centroid-analysis;
#X obj 267 222 s temp-centroid-rest;
#X obj 32 130 inlet~;
#X obj 20 40 switch~;
#X obj 20 16 r enable-temp-centroid;
#X connect 0 0 1 0;
#X connect 0 1 3 0;
#X connect 2 0 0 0;
#X connect 4 0 0 0;
#X connect 6 0 5 0;
#X restore 23 178 pd temp-centroid;
#N canvas 384 108 888 500 onset-detect 0;
#X obj 31 435 bark~ 4096 512 0.5;
#X msg 711 180 mask 4 0.75;
#X obj 711 202 s \$0-bark;
#X obj 32 77 inlet~;
#X obj 42 119 r \$0-bark;
#X obj 711 157 loadbang;
#X obj 21 41 switch~;
#X obj 21 17 r enable-onset-detect;
#X obj 414 43 setctl onset-thresh-upper;
#X obj 118 176 pack f f;
#X obj 414 90 setctl onset-thresh-lower;
#X obj 414 133 setctl onset-debounce;
#X obj 123 232 r onset-debounce;
#X obj 130 335 pack f f;
#X obj 130 287 r onset-filter-range-lower;
#X obj 183 310 r onset-filter-range-upper;
#X obj 118 128 r onset-thresh-lower;
#X obj 171 151 r onset-thresh-upper;
#X obj 642 55 genctl onset-filter-range-lower 0;
#X obj 642 100 genctl onset-filter-range-upper 20;
#X obj 643 76 setctl onset-filter-range-lower;
#X obj 642 123 setctl onset-filter-range-upper;
#X msg 118 199 thresh \$1 \$2;
#X msg 123 257 debounce \$1;
#X msg 130 358 filter_range \$1 \$2;
#X obj 414 22 genctl onset-thresh-upper 9;
#X obj 414 155 genctl enable-onset-detect 0;
#X obj 414 176 setctl enable-onset-detect;
#X msg 202 423 minvel \$1;
#X obj 414 197 genctl onset-minvel 0;
#X obj 414 218 setctl onset-minvel;
#X obj 202 400 r onset-minvel;
#X obj 415 241 genctl onset-route 0;
#X obj 415 262 setctl onset-route;
#X obj 414 67 genctl onset-thresh-lower 4.5;
#X obj 414 112 genctl onset-debounce 30;
#N canvas 913 217 505 372 route-onset 0;
#X obj 180 11 inlet;
#X obj 62 244 == 1;
#X obj 23 270 spigot;
#X obj 62 220 r onset-3f;
#X obj 221 220 == 1;
#X obj 182 246 spigot;
#X obj 221 196 r onset-tcvae;
#X obj 182 300 s analysis;
#X msg 182 276 t_c-vae;
#X obj 23 294 s sigmundto3f;
#X obj 371 215 == 1;
#X obj 332 241 spigot;
#X obj 332 295 s analysis;
#X obj 371 191 r onset-lstm-spat;
#X msg 332 271 lstm-spat;
#X obj 167 338 bng 19 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X connect 0 0 2 0;
#X connect 0 0 5 0;
#X connect 0 0 11 0;
#X connect 0 0 15 0;
#X connect 1 0 2 1;
#X connect 2 0 9 0;
#X connect 3 0 1 0;
#X connect 4 0 5 1;
#X connect 5 0 8 0;
#X connect 6 0 4 0;
#X connect 8 0 7 0;
#X connect 10 0 11 1;
#X connect 11 0 14 0;
#X connect 13 0 10 0;
#X connect 14 0 12 0;
#X restore 31 466 pd route-onset;
#X obj 415 285 genctl onset-3f 0;
#X obj 416 306 setctl onset-3f;
#X obj 416 329 genctl onset-tcvae 0;
#X obj 417 350 setctl onset-tcvae;
#X obj 416 374 genctl onset-lstm-spat 0;
#X obj 417 395 setctl onset-lstm-spat;
#X connect 0 0 36 0;
#X connect 1 0 2 0;
#X connect 3 0 0 0;
#X connect 4 0 0 0;
#X connect 5 0 1 0;
#X connect 7 0 6 0;
#X connect 9 0 22 0;
#X connect 12 0 23 0;
#X connect 13 0 24 0;
#X connect 14 0 13 0;
#X connect 15 0 13 1;
#X connect 16 0 9 0;
#X connect 17 0 9 1;
#X connect 22 0 0 0;
#X connect 23 0 0 0;
#X connect 24 0 0 0;
#X connect 31 0 28 0;
#X restore 22 201 pd onset-detect;
#X connect 0 0 1 0;
#X connect 0 0 5 0;
#X connect 0 0 4 0;
#X connect 0 0 3 0;
#X connect 0 0 2 0;
#X connect 0 0 6 0;
#X restore 35 86 pd temporal-feature;
#N canvas 894 30 1047 776 accum-data 0;
#X obj 596 11 r featureAcum-params;
#X msg 87 69 clear;
#X obj 123 558 r feat-tensor-save;
#X msg 137 627 clear;
#X obj 137 604 r feat-tensor-clear;
#X obj 88 722 route tensor shape;
#X obj 505 721 s feat-tensor-done;
#X obj 139 654 r feat-tensor-done;
#X obj 116 505 list prepend shape;
#X obj 116 529 list trim;
#X obj 116 482 r feat-tensor-shape;
#X obj 102 454 r feat-tensor-bang;
#X obj 137 7 loadbang;
#X msg 122 581 save ../../data/dataset/\$1.txt;
#X obj 87 46 r feat-tensor-accum-clear;
#X msg 123 230 shape \$1 \$2;
#X obj 123 207 pack f f;
#X obj 123 151 r tensor-accum-frames;
#X obj 176 176 r tensor-accum-length;
#X obj 760 47 setctl tensor-accum-frames;
#X obj 760 95 setctl tensor-accum-length;
#X obj 98 109 r feat-tensor-accum-done;
#X obj 88 382 route tensor shape;
#N canvas 914 31 883 1021 send-analysis 0;
#X obj 409 103 spigot;
#X obj 381 176 spigot;
#X obj 354 247 spigot;
#X obj 327 318 spigot;
#X obj 300 387 spigot;
#X obj 83 9 r analysis;
#X obj 448 80 r enable-harm-ratio;
#X obj 420 153 r enable-zero-cross;
#X obj 393 224 r enable-energy-entropy;
#X obj 366 296 r enable-attack-time;
#X obj 339 363 r enable-temp-centroid;
#X obj 273 460 spigot;
#X obj 246 531 spigot;
#X obj 218 602 spigot;
#X obj 191 674 spigot;
#X obj 166 749 spigot;
#X obj 139 818 spigot;
#X obj 112 888 spigot;
#X obj 602 36 genctl enable-harm-ratio 0;
#X obj 602 58 setctl enable-harm-ratio;
#X obj 601 79 genctl enable-zero-cross 0;
#X obj 601 102 setctl enable-zero-cross;
#X obj 600 168 genctl enable-energy-entropy 0;
#X obj 600 191 setctl enable-energy-entropy;
#X obj 601 124 genctl enable-attack-time 0;
#X obj 601 147 setctl enable-attack-time;
#X obj 601 214 genctl enable-temp-centroid 0;
#X obj 601 237 setctl enable-temp-centroid;
#X obj 312 437 r enable-spec-flux;
#X obj 285 508 r enable-spec-centroid;
#X obj 257 579 r enable-spec-harm;
#X obj 230 652 r enable-spec-inharm;
#X obj 205 725 r enable-mfcc;
#X obj 178 796 r enable-melspec;
#X obj 151 867 r enable-spectrogram;
#X obj 602 262 genctl enable-spec-flux 0;
#X obj 602 284 setctl enable-spec-flux;
#X obj 601 305 genctl enable-spec-centroid 0;
#X obj 601 328 setctl enable-spec-centroid;
#X obj 601 350 genctl enable-spec-harm 0;
#X obj 601 373 setctl enable-spec-harm;
#X obj 600 394 genctl enable-spec-inharm 0;
#X obj 600 417 setctl enable-spec-inharm;
#X obj 601 440 genctl enable-mfcc 0;
#X obj 601 487 genctl enable-melspec 0;
#X obj 601 510 setctl enable-melspec;
#X obj 601 463 setctl enable-mfcc;
#X obj 601 533 genctl enable-spectrogram 0;
#X obj 601 556 setctl enable-spectrogram;
#X obj 273 483 s spec-flux-analysis;
#X obj 218 625 s spec-harm-analysis;
#X obj 166 773 s mfcc-analysis;
#X obj 139 840 s melspec-analysis;
#X obj 112 911 s spectrogram-analysis;
#X obj 300 411 s temp-centroid-analysis;
#X obj 246 553 s spec-centroid-analysis;
#X obj 191 699 s spec-inharm-analysis;
#X obj 409 127 s harm-ratio-analysis;
#X obj 381 199 s zero-cross-analysis;
#X obj 354 270 s energy-entropy-analysis;
#X obj 327 340 s attack-time-analysis;
#X obj 83 33 t b a;
#X obj 114 54 s feat-accum-route;
#X obj 602 580 genctl enable-sigmund 0;
#X obj 602 603 setctl enable-sigmund;
#X obj 83 958 spigot;
#X obj 83 79 t b b b b b b b b b b b b b, f 47;
#X obj 83 981 s sigmund-analysis;
#X obj 122 937 r _enable-sigmund;
#X connect 0 0 57 0;
#X connect 1 0 58 0;
#X connect 2 0 59 0;
#X connect 3 0 60 0;
#X connect 4 0 54 0;
#X connect 5 0 61 0;
#X connect 6 0 0 1;
#X connect 7 0 1 1;
#X connect 8 0 2 1;
#X connect 9 0 3 1;
#X connect 10 0 4 1;
#X connect 11 0 49 0;
#X connect 12 0 55 0;
#X connect 13 0 50 0;
#X connect 14 0 56 0;
#X connect 15 0 51 0;
#X connect 16 0 52 0;
#X connect 17 0 53 0;
#X connect 28 0 11 1;
#X connect 29 0 12 1;
#X connect 30 0 13 1;
#X connect 31 0 14 1;
#X connect 32 0 15 1;
#X connect 33 0 16 1;
#X connect 34 0 17 1;
#X connect 61 0 66 0;
#X connect 61 1 62 0;
#X connect 65 0 67 0;
#X connect 66 0 65 0;
#X connect 66 1 17 0;
#X connect 66 2 16 0;
#X connect 66 3 15 0;
#X connect 66 4 14 0;
#X connect 66 5 13 0;
#X connect 66 6 12 0;
#X connect 66 7 11 0;
#X connect 66 8 4 0;
#X connect 66 9 3 0;
#X connect 66 10 2 0;
#X connect 66 11 1 0;
#X connect 66 12 0 0;
#X connect 68 0 65 1;
#X restore 762 236 pd send-analysis;
#X obj 760 118 genlist feat-tensor-shape 9 13 140 2048;
#X obj 457 317 spigot;
#X obj 596 150 r spec-flux-feat;
#X obj 596 34 r harm-ratio-feat;
#X obj 596 174 r spec-centroid-feat;
#X obj 596 221 r spec-inharm-feat;
#X obj 596 243 r mfcc-feat;
#X obj 596 103 r attack-time-feat;
#X obj 596 126 r temp-centroid-feat;
#X obj 596 80 r energy-entropy-feat;
#X obj 596 57 r zero-cross-feat;
#X obj 596 197 r spec-harm-feat;
#X obj 596 265 r melspec-feat;
#X obj 596 287 r spectrogram-feat;
#X obj 766 298 r feat-accum;
#X obj 760 140 genctl feat-accum 0;
#X obj 760 164 setctl feat-accum;
#X obj 88 430 spigot;
#X obj 127 409 r feat-tensor;
#X msg 158 283 save ../../data/dataset/\$1.txt;
#X obj 158 258 r feat-accum-save;
#X obj 760 187 genctl feat-tensor 0;
#X obj 760 211 setctl feat-tensor;
#X obj 88 746 s feat-data;
#X obj 491 375 t b b;
#X msg 491 400 clear;
#X obj 523 419 s feat-tensor-accum-done;
#X obj 88 683 conTorchionist/torch.ls2tensor feat-tensor-data -shape 10 10 -v;
#N canvas 1184 149 356 269 feat-accum-route 0;
#X obj 59 21 inlet;
#X obj 59 82 list prepend;
#X obj 140 58 r feat-accum-route;
#X obj 59 107 list trim;
#X obj 59 217 s feat-accum-t_c-vae;
#X obj 118 192 s feat-accum-lstm-spat;
#X obj 59 147 route t_c-vae lstm-spat 3f;
#X connect 0 0 1 0;
#X connect 1 0 3 0;
#X connect 2 0 1 1;
#X connect 3 0 6 0;
#X connect 6 0 4 0;
#X connect 6 1 5 0;
#X restore 241 401 pd feat-accum-route;
#X obj 88 336 conTorchionist/torch.ls2tensor feat-tensor-accum -shape 10 10;
#X obj 760 23 genctl tensor-accum-frames 1;
#X obj 760 71 genctl tensor-accum-length 3;
#X connect 0 0 53 0;
#X connect 1 0 53 0;
#X connect 2 0 13 0;
#X connect 3 0 51 0;
#X connect 4 0 3 0;
#X connect 5 0 47 0;
#X connect 7 0 51 0;
#X connect 8 0 9 0;
#X connect 9 0 51 0;
#X connect 10 0 8 0;
#X connect 11 0 51 0;
#X connect 12 0 3 0;
#X connect 12 0 1 0;
#X connect 13 0 51 0;
#X connect 14 0 1 0;
#X connect 15 0 53 0;
#X connect 16 0 15 0;
#X connect 17 0 16 0;
#X connect 18 0 16 1;
#X connect 21 0 53 0;
#X connect 22 0 41 0;
#X connect 22 0 52 0;
#X connect 25 0 53 0;
#X connect 26 0 25 0;
#X connect 27 0 25 0;
#X connect 28 0 25 0;
#X connect 29 0 25 0;
#X connect 30 0 25 0;
#X connect 31 0 25 0;
#X connect 32 0 25 0;
#X connect 33 0 25 0;
#X connect 34 0 25 0;
#X connect 35 0 25 0;
#X connect 36 0 25 0;
#X connect 37 0 25 0;
#X connect 38 0 25 1;
#X connect 41 0 51 0;
#X connect 42 0 41 1;
#X connect 43 0 53 0;
#X connect 44 0 43 0;
#X connect 48 0 49 0;
#X connect 48 1 50 0;
#X connect 49 0 50 0;
#X connect 51 0 5 0;
#X connect 51 1 6 0;
#X connect 53 0 22 0;
#X connect 53 1 48 0;
#X restore 35 136 pd accum-data;
