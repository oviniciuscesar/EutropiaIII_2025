#N canvas 294 469 449 370 12;
#X declare -path ../../../PD/externals/conTorchionist;
#X obj 18 25 declare -path ../../../PD/externals/conTorchionist;
#N canvas 294 107 250 292 spectral-feature 0;
#X obj 27 24 r~ input-sig;
#N canvas 1334 167 450 300 spec-flux 0;
#X obj 120 125 r spec-flux-analysis;
#X obj 120 172 s spec-flux-feat;
#X obj 120 149 specFlux~ 4096 512;
#X obj 13 42 switch~;
#X obj 20 99 inlet~;
#X msg 118 87 normalize 1;
#X obj 118 53 loadbang;
#X obj 13 18 r enable-spec-flux;
#X connect 0 0 2 0;
#X connect 2 0 1 0;
#X connect 4 0 2 0;
#X connect 5 0 2 0;
#X connect 6 0 5 0;
#X connect 7 0 3 0;
#X restore 26 109 pd spec-flux;
#N canvas 1141 202 450 300 spec-centroid 0;
#X obj 61 144 specCentroid~ 4096;
#X obj 61 118 r spec-centroid-analysis;
#X obj 61 167 s spec-centroid-feat;
#X obj 13 42 switch~;
#X obj 13 18 r enable-spec-centroid;
#X obj 25 82 inlet~;
#X connect 0 0 2 0;
#X connect 1 0 0 0;
#X connect 4 0 3 0;
#X connect 5 0 0 0;
#X restore 25 131 pd spec-centroid;
#N canvas 1004 392 691 470 mfcc 0;
#X obj 13 42 switch~;
#X obj 13 18 r enable-mfcc;
#X obj 89 181 torch.mfcc~ -n_mels 40 -n_mfcc 13 -n_fft 4096 -hop 512, f 33;
#X obj 64 242 s mfcc-feat;
#X obj 64 219 list;
#X obj 64 154 r mfcc-analysis;
#X obj 155 242 array set mfcc-analysis-feat;
#X msg 370 162 norm mag2;
#X msg 450 163 unit magphase;
#X obj 331 96 loadbang;
#X obj 88 107 inlet~;
#X connect 1 0 0 0;
#X connect 2 0 4 1;
#X connect 4 0 3 0;
#X connect 4 0 6 0;
#X connect 5 0 4 0;
#X connect 7 0 2 0;
#X connect 8 0 2 0;
#X connect 9 0 7 0;
#X connect 9 0 8 0;
#X connect 10 0 2 0;
#X restore 26 178 pd mfcc;
#N canvas 1033 421 647 363 melspectrogram 0;
#X obj 13 42 switch~;
#X obj 12 17 r enable-melspec;
#X obj 42 181 list;
#X obj 42 204 s melspec-feat;
#X obj 42 111 r melspec-analysis;
#X obj 188 202 array set melspec-analysis-feat;
#X obj 67 134 torch.melspectrogram~ -n_mels 140 -n_fft 4096 -hop 512 -win blackman -unit magphase -melcalc calc2, f 71;
#X obj 16 76 inlet~;
#X connect 1 0 0 0;
#X connect 2 0 3 0;
#X connect 2 0 5 0;
#X connect 4 0 2 0;
#X connect 6 0 2 1;
#X connect 7 0 6 0;
#X restore 26 202 pd melspectrogram;
#N canvas 1120 508 660 358 spectrogram 0;
#X obj 12 42 switch~;
#X obj 12 17 r enable-spectrogram;
#X obj 63 140 torch.spectrogram~ -n_fft 4096 -hop 512 -win blackman -unit magphase -norm mag, f 71;
#X obj 38 181 list;
#X obj 38 109 r spectrogram-analysis;
#X obj 38 204 s spectrogram-feat;
#X obj 186 199 array set spectrogram-analysis-feat;
#X obj 63 74 inlet~;
#X connect 1 0 0 0;
#X connect 2 0 3 1;
#X connect 3 0 5 0;
#X connect 3 0 6 0;
#X connect 4 0 3 0;
#X connect 7 0 2 0;
#X restore 26 225 pd spectrogram;
#N canvas 975 363 450 300 spec-harmonicity 0;
#X obj 13 42 switch~;
#X obj 13 18 r enable-spec-harm;
#X obj 52 166 specHarmonicity~ 4096;
#X obj 53 213 s spec-harm-feat;
#X obj 213 208 s spec-inharm-feat;
#X obj 52 120 r spec-harm-analysis;
#X obj 213 125 r spec-inharm-analysis;
#X obj 213 186 f;
#X obj 213 147 t b b;
#X obj 53 191 f;
#X obj 52 141 t b b;
#X obj 21 77 inlet~;
#X connect 1 0 0 0;
#X connect 2 0 9 1;
#X connect 2 1 7 1;
#X connect 5 0 10 0;
#X connect 6 0 8 0;
#X connect 7 0 4 0;
#X connect 8 0 7 0;
#X connect 8 1 2 0;
#X connect 9 0 3 0;
#X connect 10 0 9 0;
#X connect 10 1 2 0;
#X connect 11 0 2 0;
#X restore 25 154 pd spec-harmonicity;
#X connect 0 0 1 0;
#X connect 0 0 6 0;
#X connect 0 0 5 0;
#X connect 0 0 4 0;
#X connect 0 0 3 0;
#X connect 0 0 2 0;
#X restore 35 112 pd spectral-feature;
#N canvas 914 177 347 310 temporal-feature 0;
#X obj 24 19 r~ input-sig;
#N canvas 1024 83 450 300 harm-ratio 0;
#X obj 42 213 harmonicRatio~ 4096;
#X obj 67 161 r harm-ratio-analysis;
#X obj 42 237 s harm-ratio-feat;
#X msg 61 135 normalize 1;
#X obj 61 111 loadbang;
#X obj 20 40 switch~;
#X obj 20 16 r enable-harm-ratio;
#X obj 42 85 inlet~;
#X connect 0 0 2 0;
#X connect 1 0 0 0;
#X connect 3 0 0 0;
#X connect 4 0 3 0;
#X connect 6 0 5 0;
#X connect 7 0 0 0;
#X restore 25 84 pd harm-ratio;
#N canvas 1070 127 450 300 zero-crossing 0;
#X obj 51 227 zeroCrossing~ 4046;
#X obj 80 199 r zero-cross-analysis;
#X obj 51 250 s zero-cross-feat;
#X msg 80 154 normalize 1;
#X obj 80 130 loadbang;
#X obj 51 91 inlet~;
#X obj 20 40 switch~;
#X obj 20 16 r enable-zero-cross;
#X connect 0 0 2 0;
#X connect 1 0 0 0;
#X connect 3 0 0 0;
#X connect 4 0 3 0;
#X connect 5 0 0 0;
#X connect 7 0 6 0;
#X restore 24 107 pd zero-crossing;
#N canvas 996 77 522 355 energy-entropy 0;
#X obj 20 40 switch~;
#X obj 92 186 energyEntropy~ 4096 16;
#X obj 110 158 r energy-entropy-analysis;
#X obj 92 210 s energy-entropy-feat;
#X obj 92 124 inlet~;
#X obj 20 16 r enable-energy-entropy;
#X connect 1 0 3 0;
#X connect 2 0 1 0;
#X connect 4 0 1 0;
#X connect 5 0 0 0;
#X restore 24 154 pd energy-entropy;
#N canvas 1089 113 450 300 attack-time 0;
#X obj 20 40 switch~;
#X obj 20 16 r enable-attack-time;
#X obj 79 160 attackTime~ 4096;
#X obj 79 137 r attack-time-analysis;
#X obj 79 184 s attack-time-feat;
#X obj 55 83 inlet~;
#X connect 1 0 0 0;
#X connect 2 0 4 0;
#X connect 3 0 2 0;
#X connect 5 0 2 0;
#X restore 24 131 pd attack-time;
#N canvas 1084 133 450 300 temp-centroid 0;
#X obj 32 199 temp.centroid \$0-input-sig 0 88200;
#X obj 32 222 s temp-centroid-feat;
#X obj 48 172 r temp-centroid-analysis;
#X obj 267 222 s temp-centroid-rest;
#X obj 32 130 inlet~;
#X obj 20 40 switch~;
#X obj 20 16 r enable-temp-centroid;
#X connect 0 0 1 0;
#X connect 0 1 3 0;
#X connect 2 0 0 0;
#X connect 4 0 0 0;
#X connect 6 0 5 0;
#X restore 23 178 pd temp-centroid;
#N canvas 1176 202 893 653 onset-detect 0;
#X obj 32 490 bark~ 4096 512 0.5;
#X msg 711 180 mask 4 0.75;
#X obj 711 202 s \$0-bark;
#X obj 32 77 inlet~;
#X obj 42 119 r \$0-bark;
#X obj 711 157 loadbang;
#X obj 21 41 switch~;
#X obj 21 17 r enable-onset-detect;
#X obj 414 43 setctl onset-thresh-upper;
#X obj 139 150 pack f f;
#X obj 414 90 setctl onset-thresh-lower;
#X obj 416 133 setctl onset-debounce;
#X obj 415 112 genctl onset-debounce 1000;
#X obj 144 206 r onset-debounce;
#X obj 151 309 pack f f;
#X obj 151 261 r onset-filter-range-lower;
#X obj 204 284 r onset-filter-range-upper;
#X obj 139 102 r onset-thresh-lower;
#X obj 192 125 r onset-thresh-upper;
#X obj 642 55 genctl onset-filter-range-lower 0;
#X obj 642 100 genctl onset-filter-range-upper 20;
#X obj 643 76 setctl onset-filter-range-lower;
#X obj 642 123 setctl onset-filter-range-upper;
#X msg 139 173 thresh \$1 \$2;
#X msg 144 231 debounce \$1;
#X msg 151 332 filter_range \$1 \$2;
#X obj 413 22 genctl onset-thresh-upper 9;
#X obj 414 67 genctl onset-thresh-lower 7.5;
#X obj 417 157 genctl enable-onset-detect 0;
#X obj 418 178 setctl enable-onset-detect;
#X msg 202 423 minvel \$1;
#X obj 419 203 genctl onset-minvel 0;
#X obj 420 224 setctl onset-minvel;
#X obj 202 400 r onset-minvel;
#X obj 31 520 cyclone/gate 3 0;
#X obj 31 557 s analysis;
#X obj 86 589 s onset-spat;
#X obj 140 618 s onset-sampler;
#X obj 207 501 r onset-route;
#X obj 422 248 genctl onset-route 0;
#X obj 423 269 setctl onset-route;
#X connect 0 0 34 1;
#X connect 1 0 2 0;
#X connect 3 0 0 0;
#X connect 4 0 0 0;
#X connect 5 0 1 0;
#X connect 7 0 6 0;
#X connect 9 0 23 0;
#X connect 13 0 24 0;
#X connect 14 0 25 0;
#X connect 15 0 14 0;
#X connect 16 0 14 1;
#X connect 17 0 9 0;
#X connect 18 0 9 1;
#X connect 23 0 0 0;
#X connect 24 0 0 0;
#X connect 25 0 0 0;
#X connect 33 0 30 0;
#X connect 34 0 35 0;
#X connect 34 1 36 0;
#X connect 34 2 37 0;
#X connect 38 0 34 0;
#X restore 22 201 pd onset-detect;
#X connect 0 0 1 0;
#X connect 0 0 5 0;
#X connect 0 0 4 0;
#X connect 0 0 3 0;
#X connect 0 0 2 0;
#X connect 0 0 6 0;
#X restore 35 86 pd temporal-feature;
#N canvas 294 93 1042 774 accum-data 1;
#X obj 596 11 r featureAcum-params;
#X msg 87 69 clear;
#X obj 123 538 r feat-tensor-save;
#X msg 137 607 clear;
#X obj 137 584 r feat-tensor-clear;
#X obj 88 687 route tensor shape;
#X obj 421 686 s feat-tensor-done;
#X obj 139 634 r feat-tensor-done;
#X obj 116 485 list prepend shape;
#X obj 116 509 list trim;
#X obj 116 462 r feat-tensor-shape;
#X obj 102 434 r feat-tensor-bang;
#X obj 137 7 loadbang;
#X msg 122 561 save ../../data/dataset/\$1.txt;
#X obj 88 663 torch.ls2tensor feat-tensor-data -shape 10 10 -v;
#X obj 87 46 r feat-tensor-accum-clear;
#X msg 123 230 shape \$1 \$2;
#X obj 123 207 pack f f;
#X obj 123 151 r tensor-accum-frames;
#X obj 176 176 r tensor-accum-length;
#X obj 760 47 setctl tensor-accum-frames;
#X obj 760 95 setctl tensor-accum-length;
#X obj 98 109 r feat-tensor-accum-done;
#X obj 88 362 route tensor shape;
#N canvas 294 57 837 921 send-analysis 0;
#X obj 409 57 spigot;
#X obj 380 130 spigot;
#X obj 352 201 spigot;
#X obj 325 272 spigot;
#X obj 296 341 spigot;
#X obj 83 9 r analysis;
#X obj 448 34 r enable-harm-ratio;
#X obj 419 107 r enable-zero-cross;
#X obj 391 178 r enable-energy-entropy;
#X obj 364 250 r enable-attack-time;
#X obj 335 317 r enable-temp-centroid;
#X obj 83 33 t b b b b b b b b b b b b, f 47;
#X obj 267 418 spigot;
#X obj 236 491 spigot;
#X obj 207 573 spigot;
#X obj 180 646 spigot;
#X obj 150 723 spigot;
#X obj 119 797 spigot;
#X obj 83 868 spigot;
#X obj 602 36 genctl enable-harm-ratio 0;
#X obj 602 58 setctl enable-harm-ratio;
#X obj 601 79 genctl enable-zero-cross 0;
#X obj 601 102 setctl enable-zero-cross;
#X obj 600 168 genctl enable-energy-entropy 0;
#X obj 600 191 setctl enable-energy-entropy;
#X obj 601 124 genctl enable-attack-time 0;
#X obj 601 147 setctl enable-attack-time;
#X obj 601 214 genctl enable-temp-centroid 0;
#X obj 601 237 setctl enable-temp-centroid;
#X obj 306 395 r enable-spec-flux;
#X obj 275 468 r enable-spec-centroid;
#X obj 246 550 r enable-spec-harm;
#X obj 219 624 r enable-spec-inharm;
#X obj 189 699 r enable-mfcc;
#X obj 158 775 r enable-melspec;
#X obj 122 847 r enable-spectrogram;
#X obj 602 262 genctl enable-spec-flux 0;
#X obj 602 284 setctl enable-spec-flux;
#X obj 601 305 genctl enable-spec-centroid 0;
#X obj 601 328 setctl enable-spec-centroid;
#X obj 601 350 genctl enable-spec-harm 0;
#X obj 601 373 setctl enable-spec-harm;
#X obj 600 394 genctl enable-spec-inharm 0;
#X obj 600 417 setctl enable-spec-inharm;
#X obj 601 440 genctl enable-mfcc 0;
#X obj 601 487 genctl enable-melspec 0;
#X obj 601 510 setctl enable-melspec;
#X obj 601 463 setctl enable-mfcc;
#X obj 601 533 genctl enable-spectrogram 0;
#X obj 601 556 setctl enable-spectrogram;
#X obj 267 443 s spec-flux-analysis;
#X obj 207 596 s spec-harm-analysis;
#X obj 150 747 s mfcc-analysis;
#X obj 119 822 s melspec-analysis;
#X obj 83 891 s spectrogram-analysis;
#X obj 296 365 s temp-centroid-analysis;
#X obj 236 517 s spec-centroid-analysis;
#X obj 180 671 s spec-inharm-analysis;
#X obj 409 81 s harm-ratio-analysis;
#X obj 380 153 s zero-cross-analysis;
#X obj 352 224 s energy-entropy-analysis;
#X obj 325 294 s attack-time-analysis;
#X connect 0 0 58 0;
#X connect 1 0 59 0;
#X connect 2 0 60 0;
#X connect 3 0 61 0;
#X connect 4 0 55 0;
#X connect 5 0 11 0;
#X connect 6 0 0 1;
#X connect 7 0 1 1;
#X connect 8 0 2 1;
#X connect 9 0 3 1;
#X connect 10 0 4 1;
#X connect 11 0 18 0;
#X connect 11 1 17 0;
#X connect 11 2 16 0;
#X connect 11 3 15 0;
#X connect 11 4 14 0;
#X connect 11 5 13 0;
#X connect 11 6 12 0;
#X connect 11 7 4 0;
#X connect 11 8 3 0;
#X connect 11 9 2 0;
#X connect 11 10 1 0;
#X connect 11 11 0 0;
#X connect 12 0 50 0;
#X connect 13 0 56 0;
#X connect 14 0 51 0;
#X connect 15 0 57 0;
#X connect 16 0 52 0;
#X connect 17 0 53 0;
#X connect 18 0 54 0;
#X connect 29 0 12 1;
#X connect 30 0 13 1;
#X connect 31 0 14 1;
#X connect 32 0 15 1;
#X connect 33 0 16 1;
#X connect 34 0 17 1;
#X connect 35 0 18 1;
#X restore 354 18 pd send-analysis;
#X obj 760 23 genctl tensor-accum-frames 1;
#X obj 760 71 genctl tensor-accum-length 2210;
#X obj 760 118 genlist feat-tensor-shape 9 13 140 2048;
#X obj 457 317 spigot;
#X obj 596 150 r spec-flux-feat;
#X obj 596 34 r harm-ratio-feat;
#X obj 596 174 r spec-centroid-feat;
#X obj 596 221 r spec-inharm-feat;
#X obj 596 243 r mfcc-feat;
#X obj 596 103 r attack-time-feat;
#X obj 596 126 r temp-centroid-feat;
#X obj 596 80 r energy-entropy-feat;
#X obj 596 57 r zero-cross-feat;
#X obj 596 197 r spec-harm-feat;
#X obj 596 265 r melspec-feat;
#X obj 596 287 r spectrogram-feat;
#X obj 766 298 r feat-accum;
#X obj 760 140 genctl feat-accum 0;
#X obj 760 164 setctl feat-accum;
#X obj 88 410 spigot;
#X obj 127 389 r feat-tensor;
#X msg 158 283 save ../../data/dataset/\$1.txt;
#X obj 158 258 r feat-accum-save;
#X obj 760 187 genctl feat-tensor 0;
#X obj 760 211 setctl feat-tensor;
#X obj 88 336 torch.ls2tensor feat-tensor-accum -shape 10 10 -v;
#X obj 88 711 s feat-data;
#X obj 255 381 s feat-accum-data;
#X obj 325 444 print feat;
#X obj 428 358 t b b;
#X msg 428 383 clear;
#X obj 460 402 s feat-tensor-accum-done;
#X connect 0 0 50 0;
#X connect 1 0 50 0;
#X connect 2 0 13 0;
#X connect 3 0 14 0;
#X connect 4 0 3 0;
#X connect 5 0 51 0;
#X connect 7 0 14 0;
#X connect 8 0 9 0;
#X connect 9 0 14 0;
#X connect 10 0 8 0;
#X connect 11 0 14 0;
#X connect 12 0 3 0;
#X connect 12 0 1 0;
#X connect 13 0 14 0;
#X connect 14 0 5 0;
#X connect 14 1 6 0;
#X connect 15 0 1 0;
#X connect 16 0 50 0;
#X connect 17 0 16 0;
#X connect 18 0 17 0;
#X connect 19 0 17 1;
#X connect 22 0 50 0;
#X connect 23 0 44 0;
#X connect 23 0 52 0;
#X connect 23 0 53 0;
#X connect 28 0 50 0;
#X connect 29 0 28 0;
#X connect 30 0 28 0;
#X connect 31 0 28 0;
#X connect 32 0 28 0;
#X connect 33 0 28 0;
#X connect 34 0 28 0;
#X connect 35 0 28 0;
#X connect 36 0 28 0;
#X connect 37 0 28 0;
#X connect 38 0 28 0;
#X connect 39 0 28 0;
#X connect 40 0 28 0;
#X connect 41 0 28 1;
#X connect 44 0 14 0;
#X connect 45 0 44 1;
#X connect 46 0 50 0;
#X connect 47 0 46 0;
#X connect 50 0 23 0;
#X connect 50 1 54 0;
#X connect 54 0 55 0;
#X connect 54 1 56 0;
#X connect 55 0 56 0;
#X restore 35 136 pd accum-data;
